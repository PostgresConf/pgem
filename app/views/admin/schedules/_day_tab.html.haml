- compact_grid = EventType::LENGTH_STEP < 15
/ use smaller cell heights for more compact grids
- cell_height = compact_grid ? 32 : 58
- d_start = DateTime.strptime("#{date.to_s} #{@conference.start_hour} #{@tzname}", "%Y-%m-%d %H %Z")
- d_end = DateTime.strptime("#{date.to_s} #{@conference.end_hour} #{@tzname}", "%Y-%m-%d %H %Z")
- drange = (d_start.to_i..d_end.to_i).step(EventType::LENGTH_STEP.minutes)
- slots = drange.map {|t| Time.at(t).to_datetime.in_time_zone(@conference.timezone)}
- date_event_schedules = @event_schedules.where(start_time: d_start..d_end)
.row
  - @rooms.each do |room|
    .col-md-1.col-xs-6.room-col
      .room-name
        - room_date_event_schedules = date_event_schedules.select{ |e| e.room == room }
        = room.name
      - slots.each do |slot|
        .schedule-room-slot{ data: {slot_datetime: slot}, |
                             room_id: room.id, |
                             style: "height: #{cell_height}px"}
          .div
            = slot.strftime('%H:%M')
          - event_schedules = room_date_event_schedules.select{ |e| e.start_time == slot }
          - if event_schedules.any?
            - event_schedule = event_schedules.first
            = render partial: 'event', locals: { event: event_schedule.event, event_schedule_id: event_schedule.id}
